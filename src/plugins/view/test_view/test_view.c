#include <HippoPlugin.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "../../../external/wrui_qt/c_api.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct TestViewPlugin {
	struct PUPluginUI* ui;
} TestViewPlugin;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void* test_view_create(HippoServiceAPI* services) {
    TestViewPlugin* plugin = malloc(sizeof(TestViewPlugin));
    memset(plugin, 0, sizeof(TestViewPlugin));
    return plugin;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void test_view_setup_ui(void* user_data, struct PUPluginUI* ui_funcs) {
    TestViewPlugin* plugin = (TestViewPlugin*)user_data;
    plugin->ui = ui_funcs;

    struct PUPushButton button = PU_create_push_button(plugin->ui);

	PUPushButton_set_text(button, "foobar");
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int test_view_destroy(void* user_data) {
    TestViewPlugin* plugin = (TestViewPlugin*)user_data;
    free(plugin);
    return 0;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void test_view_event(int event) {
    (void)event;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static HippoViewPlugin s_test_view = {
    HIPPO_VIEW_PLUGIN_API_VERSION,
    "TestView",
    "0.0.1",
    test_view_create,
    test_view_setup_ui,
    test_view_destroy,
    test_view_event,
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

HIPPO_EXPORT HippoViewPlugin* hippo_view_plugin() {
	return &s_test_view;
}

